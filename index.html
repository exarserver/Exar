<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  
  <title>SERVER EXAR - Ø³ÙŠØ±ÙØ± Ø¥ÙƒØ³Ø§Ø±</title>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  
  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { getDatabase, ref, push, set, onValue, remove, serverTimestamp, get } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-database.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyB-il2jFPjrro4yYB-mGOZDNXGofOzzk1Q",
      authDomain: "severexar.firebaseapp.com",
      databaseURL: "https://severexar-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "severexar",
      storageBucket: "severexar.firebasestorage.app",
      messagingSenderId: "273479278732",
      appId: "1:273479278732:web:ae28b8a7a3510219559ba9",
      measurementId: "G-RB7DBC8SV8"
    };
    
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    
    window.firebaseDB = {
      database,
      ref,
      push,
      set,
      get,
      onValue,
      remove,
      serverTimestamp
    };
  </script>
  
  <!-- ØªÙ†Ø³ÙŠÙ‚Ø§Øª CSS -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary: #667eea;
      --primary-dark: #5a67d8;
      --secondary: #764ba2;
      --accent: #f093fb;
      --success: #48bb78;
      --danger: #f56565;
      --warning: #ed8936;
      --info: #4299e1;
      --dark: #2d3748;
      --light: #f7fafc;
      --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-accent: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    body {
      font-family: 'Cairo', sans-serif;
      background: #0f0f1e;
      color: #e2e8f0;
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, #0f0f1e, #1a1a2e, #16213e);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      z-index: -2;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    /* Ù†Ù‚Ø§Ø· Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© */
    .bg-animation {
      position: fixed;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
    }
    
    .bg-animation span {
      position: absolute;
      width: 20px;
      height: 20px;
      background: rgba(255, 255, 255, 0.1);
      animation: move 25s linear infinite;
      border-radius: 50%;
    }
    
    @keyframes move {
      from {
        transform: translateY(100vh) scale(0);
      }
      to {
        transform: translateY(-100vh) scale(1);
      }
    }
    
    /* Header */
    header {
      background: rgba(15, 15, 30, 0.95);
      backdrop-filter: blur(10px);
      padding: 2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
      border-bottom: 2px solid rgba(102, 126, 234, 0.3);
    }
    
    header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
      animation: pulse 4s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }
    
    header h1 {
      font-size: 3.5rem;
      font-weight: 900;
      background: var(--gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
      position: relative;
      z-index: 1;
      text-shadow: 0 0 80px rgba(102, 126, 234, 0.5);
      animation: glow 2s ease-in-out infinite alternate;
    }
    
    @keyframes glow {
      from { text-shadow: 0 0 30px rgba(102, 126, 234, 0.5); }
      to { text-shadow: 0 0 50px rgba(102, 126, 234, 0.8), 0 0 70px rgba(118, 75, 162, 0.5); }
    }
    
    /* Navigation */
    nav {
      background: rgba(26, 26, 46, 0.95);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: center;
      gap: 2rem;
      padding: 1.5rem;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
    }
    
    nav a {
      color: #e2e8f0;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      padding: 0.7rem 1.5rem;
      border-radius: 30px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    nav a::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: var(--gradient);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.5s ease;
    }
    
    nav a:hover::before {
      width: 300px;
      height: 300px;
    }
    
    nav a:hover {
      color: white;
      transform: translateY(-2px);
      z-index: 1;
    }
    
    nav a span {
      position: relative;
      z-index: 1;
    }
    
    /* Badge */
    .badge {
      background: var(--gradient-accent);
      color: white;
      padding: 3px 8px;
      border-radius: 15px;
      font-size: 0.75rem;
      font-weight: 700;
      position: absolute;
      top: -8px;
      right: -10px;
      box-shadow: 0 2px 10px rgba(240, 147, 251, 0.5);
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    
    /* Sections */
    section {
      display: none;
      padding: 3rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
      animation: fadeInUp 0.5s ease;
    }
    
    section.active {
      display: block;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Content Cards */
    .content-card {
      background: rgba(26, 26, 46, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      border: 1px solid rgba(102, 126, 234, 0.2);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }
    
    .content-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
      border-color: rgba(102, 126, 234, 0.5);
    }
    
    h2 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      background: var(--gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    /* Forms */
    form {
      background: rgba(26, 26, 46, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 2rem;
      border: 1px solid rgba(102, 126, 234, 0.2);
    }
    
    label {
      display: block;
      margin-bottom: 0.5rem;
      color: #a0aec0;
      font-weight: 600;
      font-size: 0.95rem;
    }
    
    input, textarea {
      width: 100%;
      padding: 0.8rem 1.2rem;
      margin-bottom: 1.5rem;
      background: rgba(15, 15, 30, 0.8);
      border: 2px solid rgba(102, 126, 234, 0.2);
      border-radius: 10px;
      color: #e2e8f0;
      font-size: 1rem;
      transition: all 0.3s ease;
      font-family: 'Cairo', sans-serif;
    }
    
    input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      transform: translateY(-2px);
    }
    
    button {
      background: var(--gradient);
      color: white;
      border: none;
      padding: 0.8rem 2rem;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
      position: relative;
      overflow: hidden;
    }
    
    button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.6s ease;
    }
    
    button:hover::before {
      width: 300px;
      height: 300px;
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(102, 126, 234, 0.5);
    }
    
    button:active {
      transform: translateY(-1px);
    }
    
    button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }
    
    /* Alerts */
    .alert {
      padding: 1rem 1.5rem;
      border-radius: 10px;
      margin-bottom: 1.5rem;
      font-weight: 500;
      display: none;
      animation: slideInRight 0.3s ease;
    }
    
    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .error-message {
      background: rgba(245, 101, 101, 0.1);
      border: 1px solid rgba(245, 101, 101, 0.3);
      color: #fc8181;
    }
    
    .success-message {
      background: rgba(72, 187, 120, 0.1);
      border: 1px solid rgba(72, 187, 120, 0.3);
      color: #68d391;
    }
    
    /* Info Boxes */
    .info-box {
      background: rgba(66, 153, 225, 0.1);
      border: 1px solid rgba(66, 153, 225, 0.3);
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      position: relative;
      overflow: hidden;
    }
    
    .info-box::before {
      content: 'ğŸ’¡';
      position: absolute;
      top: -20px;
      right: -20px;
      font-size: 4rem;
      opacity: 0.1;
    }
    
    /* Loader */
    .loader {
      width: 50px;
      height: 50px;
      margin: 20px auto;
      display: none;
    }
    
    .loader::after {
      content: '';
      display: block;
      width: 40px;
      height: 40px;
      margin: 5px;
      border-radius: 50%;
      border: 3px solid transparent;
      border-top-color: var(--primary);
      border-bottom-color: var(--secondary);
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Rules Section */
    #rules ul {
      list-style: none;
      padding: 0;
    }
    
    #rules li {
      background: rgba(26, 26, 46, 0.8);
      margin-bottom: 1rem;
      padding: 1.2rem;
      border-radius: 10px;
      border-left: 4px solid var(--primary);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    #rules li::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 0;
      height: 100%;
      background: rgba(102, 126, 234, 0.1);
      transition: all 0.3s ease;
    }
    
    #rules li:hover::before {
      width: 100%;
    }
    
    #rules li:hover {
      transform: translateX(10px);
    }
    
    /* Admin Section */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .stat-card {
      background: var(--gradient);
      border-radius: 20px;
      padding: 2rem;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: rgba(255, 255, 255, 0.1);
      transform: rotate(45deg);
      transition: all 0.5s ease;
    }
    
    .stat-card:hover::before {
      top: -60%;
      left: -60%;
    }
    
    .stat-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
    }
    
    .stat-number {
      font-size: 3rem;
      font-weight: 900;
      color: white;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    .stat-label {
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.1rem;
      font-weight: 600;
      margin-top: 0.5rem;
    }
    
    /* Application Cards */
    .application-card {
      background: rgba(26, 26, 46, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      border: 1px solid rgba(102, 126, 234, 0.2);
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .application-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.2), transparent);
      transition: all 0.5s ease;
    }
    
    .application-card:hover::after {
      left: 100%;
    }
    
    .application-card:hover {
      transform: translateY(-3px);
      border-color: rgba(102, 126, 234, 0.5);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
    }
    
    .card-header {
      background: rgba(102, 126, 234, 0.2);
      padding: 0.8rem;
      margin: -1.5rem -1.5rem 1rem;
      border-radius: 20px 20px 10px 10px;
      font-weight: 600;
      color: #e2e8f0;
    }
    
    .admin-note {
      background: rgba(66, 153, 225, 0.1);
      border: 1px solid rgba(66, 153, 225, 0.3);
      border-radius: 10px;
      padding: 0.8rem;
      margin-top: 1rem;
      color: #63b3ed;
      font-style: italic;
    }
    
    .action-buttons {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .action-buttons button {
      flex: 1;
      padding: 0.6rem 1rem;
      font-size: 0.9rem;
    }
    
    /* Search Input */
    #searchInput {
      width: 100%;
      padding: 1rem 1.5rem;
      font-size: 1.1rem;
      background: rgba(15, 15, 30, 0.8);
      border: 2px solid rgba(102, 126, 234, 0.3);
      border-radius: 50px;
      color: #e2e8f0;
      margin-bottom: 1.5rem;
      transition: all 0.3s ease;
    }
    
    #searchInput:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
    }
    
    /* Filter Badges */
    .filter-badges {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    
    .filter-badge {
      background: rgba(26, 26, 46, 0.8);
      color: #a0aec0;
      padding: 0.6rem 1.5rem;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      border: 2px solid rgba(102, 126, 234, 0.2);
    }
    
    .filter-badge:hover {
      background: rgba(102, 126, 234, 0.2);
      border-color: var(--primary);
      color: white;
      transform: translateY(-2px);
    }
    
    .filter-badge.active {
      background: var(--gradient);
      color: white;
      border-color: transparent;
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
    }
    
    /* Connection Status */
    .connection-status {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(26, 26, 46, 0.95);
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(102, 126, 234, 0.3);
    }
    
    .status-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #48bb78;
      animation: statusPulse 2s ease-in-out infinite;
    }
    
    @keyframes statusPulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(0.8); }
    }
    
    .status-indicator.offline {
      background: #f56565;
      animation: none;
    }
    
    /* Simple Auth Modal */
    .auth-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
    }
    
    .auth-modal.active {
      display: flex;
    }
    
    .auth-content {
      background: rgba(26, 26, 46, 0.95);
      padding: 2.5rem;
      border-radius: 20px;
      max-width: 400px;
      width: 90%;
      border: 1px solid rgba(102, 126, 234, 0.3);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
      animation: modalFadeIn 0.3s ease;
      text-align: center;
    }
    
    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    .auth-header {
      margin-bottom: 2rem;
    }
    
    .auth-header h3 {
      font-size: 2rem;
      background: var(--gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
    }
    
    .close-modal {
      position: absolute;
      top: 20px;
      right: 20px;
      background: transparent;
      border: none;
      color: #a0aec0;
      font-size: 2rem;
      cursor: pointer;
      padding: 0;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .close-modal:hover {
      background: rgba(102, 126, 234, 0.2);
      color: white;
    }
    
    /* Admin Panel Info */
    .admin-info {
      background: rgba(102, 126, 234, 0.1);
      border: 1px solid rgba(102, 126, 234, 0.3);
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .admin-info button {
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
    }
    
    /* User Badge */
    .user-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(102, 126, 234, 0.2);
      padding: 0.3rem 1rem;
      border-radius: 20px;
      font-weight: 600;
    }
    
    .role-badge {
      display: inline-block;
      padding: 0.2rem 0.8rem;
      border-radius: 15px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-left: 0.5rem;
    }
    
    .role-owner {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }
    
    .role-admin {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .role-moderator {
      background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
      color: white;
    }
    
    /* Admin Tabs */
    .admin-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid rgba(102, 126, 234, 0.2);
      padding-bottom: 1rem;
    }
    
    .admin-tab {
      padding: 0.8rem 1.5rem;
      background: transparent;
      border: none;
      color: #a0aec0;
      font-weight: 600;
      cursor: pointer;
      border-radius: 10px 10px 0 0;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .admin-tab.active {
      background: rgba(102, 126, 234, 0.2);
      color: white;
    }
    
    .admin-tab.active::after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gradient);
    }
    
    /* Admin List */
    .admin-list {
      display: grid;
      gap: 1rem;
    }
    
    .admin-card {
      background: rgba(26, 26, 46, 0.8);
      border-radius: 15px;
      padding: 1.5rem;
      border: 1px solid rgba(102, 126, 234, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }
    
    .admin-card:hover {
      transform: translateX(5px);
      border-color: rgba(102, 126, 234, 0.5);
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
    }
    
    .admin-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: white;
      margin-left: 1rem;
    }
    
    .admin-details {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .admin-meta {
      color: #a0aec0;
      font-size: 0.9rem;
      margin-top: 0.3rem;
    }
    
    /* Permissions Grid */
    .permissions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .permission-item {
      background: rgba(15, 15, 30, 0.5);
      padding: 0.8rem;
      border-radius: 10px;
      text-align: center;
      border: 1px solid rgba(102, 126, 234, 0.1);
    }
    
    .permission-item.allowed {
      border-color: rgba(72, 187, 120, 0.3);
      background: rgba(72, 187, 120, 0.1);
    }
    
    .permission-item.denied {
      border-color: rgba(245, 101, 101, 0.3);
      background: rgba(245, 101, 101, 0.1);
    }
    
    /* Footer */
    footer {
      background: rgba(15, 15, 30, 0.95);
      text-align: center;
      padding: 2rem;
      margin-top: 3rem;
      border-top: 1px solid rgba(102, 126, 234, 0.2);
      color: #a0aec0;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      header h1 {
        font-size: 2.5rem;
      }
      
      nav {
        gap: 0.5rem;
        padding: 1rem;
        flex-wrap: wrap;
      }
      
      nav a {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }
      
      .stats-container {
        grid-template-columns: 1fr;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .connection-status {
        bottom: 10px;
        right: 10px;
        padding: 0.6rem 1rem;
        font-size: 0.9rem;
      }
      
      .auth-content {
        padding: 2rem;
      }
      
      .admin-tabs {
        flex-wrap: wrap;
      }
      
      .admin-card {
        flex-direction: column;
        text-align: center;
      }
      
      .admin-details {
        flex-direction: column;
      }
    }
    
    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(15, 15, 30, 0.5);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--gradient);
      border-radius: 5px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-dark);
    }
    
    /* Rate Limit Warning */
    .rate-limit-warning {
      background: rgba(237, 137, 54, 0.1);
      border: 1px solid rgba(237, 137, 54, 0.3);
      color: #f6ad55;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
      text-align: center;
      display: none;
    }
  </style>
</head>
<body>
  <!-- Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© -->
  <div class="bg-animation">
    <span style="top: 20%; left: 10%; animation-delay: 0s;"></span>
    <span style="top: 40%; left: 30%; animation-delay: 2s;"></span>
    <span style="top: 60%; left: 50%; animation-delay: 4s;"></span>
    <span style="top: 80%; left: 70%; animation-delay: 6s;"></span>
    <span style="top: 10%; left: 90%; animation-delay: 8s;"></span>
  </div>

  <header>
    <h1>SERVER EXAR</h1>
    <p style="color: #a0aec0; font-size: 1.2rem;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø³ÙŠØ±ÙØ± Ø¥ÙƒØ³Ø§Ø±  </p>
  </header>

  <nav>
    <a onclick="showSection('home')"><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></a>
    <a onclick="showSection('apply')"><span>Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</span></a>
    <a onclick="showSection('rules')"><span>Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</span></a>
    <a onclick="showPasswordModal()" style="position: relative;">
      <span>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
      <span id="notificationBadge" class="badge" style="display: none;">0</span>
    </a>
  </nav>

  <main>
    <!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <section id="home" class="active">
      <div class="content-card">
        <h2>Ø¹Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±</h2>
        <p style="font-size: 1.2rem; line-height: 1.8;">
          Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø³ÙŠØ±ÙØ± Ø¥ÙƒØ³Ø§Ø±. 
          Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ Ù„ØªØ¹ÙŠØ´ ØªØ¬Ø±Ø¨Ø© Ù„Ø¹Ø¨ ÙØ±ÙŠØ¯Ø© Ù…Ø¹ Ù…Ø¬ØªÙ…Ø¹ Ø±Ø§Ø¦Ø¹ Ù…Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†.
          ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„ÙŠÙ†Ø§ Ø¹Ø¨Ø± ØµÙØ­Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ….
        </p>
      </div>
    </section>

    <!-- Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… -->
    <section id="apply">
      <h2>Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</h2>
      
      <div class="info-box">
        <strong>ğŸ“ Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…:</strong>
      </div>
      
      <div class="rate-limit-warning" id="rateLimitWarning">
        âš ï¸ ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø·Ù„Ø¨Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ Ù‚Ù„ÙŠÙ„.
      </div>
      
      <div class="error-message alert" id="errorMessage"></div>
      <div class="success-message alert" id="successMessage"></div>
      
      <form id="applyForm">
        <label>Ø§Ù„Ø§Ø³Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©:</label>
        <input type="text" name="ign" id="ign" required maxlength="30" minlength="3" />
        
        <label>Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯:</label>
        <input type="text" name="discord" id="discord" placeholder="Ù…Ø«Ø§Ù„: username Ø£Ùˆ username#1234" required />
        
        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
        <input type="email" name="email" id="email" placeholder="your@email.com" />
        
        <label>Ø§Ù„Ø¹Ù…Ø±:</label>
        <input type="number" name="age" id="age" min="10" max="100" required />
        
        <label>Ù„Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…ØŸ</label>
        <textarea name="reason" id="reason" rows="4" required maxlength="500" minlength="10"></textarea>
        
        <button type="submit" id="submitBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
        <div class="loader" id="loader"></div>
      </form>
    </section>

    <!-- Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† -->
    <section id="rules">
      <h2>Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ±</h2>
      <ul>
        <li>ğŸš« Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„ØºØ´ Ø£Ùˆ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ù…Ù…Ù†ÙˆØ¹Ø©</li>
        <li>ğŸ’¬ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù… ÙˆØ§Ø¬Ø¨ Ù„Ù„Ø¬Ù…ÙŠØ¹</li>
        <li>â›ï¸ Ù„Ø§ ØªØ³Ø±Ù‚ Ø£Ùˆ ØªØ¯Ù…Ø± Ù…Ù…ØªÙ„ÙƒØ§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</li>
        <li>ğŸ›¡ï¸ Ø§ØªØ¨Ø¹ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹</li>
        <li>ğŸ® Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ù†Ø¸ÙŠÙ ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ† Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚</li>
        <li>ğŸšª Ø¹Ø¯Ù… Ø¯Ø®ÙˆÙ„ Ù…Ù…ØªÙ„ÙƒØ§Øª Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ø¯ÙˆÙ† Ø¥Ø°Ù†</li>
        <li>ğŸ’ Ø¹Ø¯Ù… Ø³Ø±Ù‚Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ù…Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</li>
        <li>ğŸ”Š Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµÙˆØª Ø¨Ø§Ø­ØªØ±Ø§Ù… ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</li>
      </ul>
    </section>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
    <section id="admin">
      <h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
      
      <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ -->
      <div class="admin-info">
        <div>
          <span class="user-badge">
            ğŸ‘¤ <span id="currentUserName">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span>
            <span id="currentUserRole" class="role-badge"></span>
          </span>
        </div>
        <button onclick="logoutAdmin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
      </div>
      
      <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
      <div class="admin-tabs">
        <button class="admin-tab active" onclick="showAdminTab('applications')">
          ğŸ“‹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        </button>
        <button class="admin-tab" onclick="showAdminTab('admins')" id="adminsTabBtn">
          ğŸ‘¥ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†
        </button>
      </div>
      
      <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
      <div id="applicationsTab" class="admin-tab-content">
        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
        <div style="margin-bottom: 2rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
          <button onclick="exportApplications()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
          <button onclick="exportToCSV()" style="background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);">ğŸ“Š ØªØµØ¯ÙŠØ± Excel</button>
          <button onclick="syncWithFirebase()" style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);">ğŸ”„ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
          <button onclick="clearAllApplications()" style="background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);" id="clearAllBtn">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
        </div>
        
        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
        <div class="stats-container" id="statsContainer"></div>
        
        <!-- Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø© -->
        <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª..." onkeyup="searchApplications()">
        
        <div class="filter-badges">
          <div class="filter-badge active" onclick="filterByAge('all')">Ø§Ù„ÙƒÙ„</div>
          <div class="filter-badge" onclick="filterByAge('10-15')">10-15 Ø³Ù†Ø©</div>
          <div class="filter-badge" onclick="filterByAge('16-20')">16-20 Ø³Ù†Ø©</div>
          <div class="filter-badge" onclick="filterByAge('21+')">21+ Ø³Ù†Ø©</div>
        </div>
        
        <div class="info-box">
          <strong>â˜ï¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ø§Ù„Ø³Ø­Ø§Ø¨Ø©</strong><br>
          <small>âœ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Firebase ÙˆÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§ Ù…Ù† Ø£ÙŠ Ø¬Ù‡Ø§Ø².</small>
        </div>
        
        <div id="applications"></div>
      </div>
      
      <div id="adminsTab" class="admin-tab-content" style="display: none;">
        <h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†</h3>
        
        <div class="info-box">
          <strong>ğŸ‘¥ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</strong><br>
          <small>Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ø£Ø¹Ø¶Ø§Ø¡ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±ØªØ¨Ù‡Ù…</small>
        </div>
        
        <div class="admin-list" id="adminsList"></div>
        
        <!-- Ø³Ø¬Ù„ ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ù„Ù„Ù…Ø§Ù„Ùƒ ÙÙ‚Ø·) -->
        <div id="loginLogsSection" style="display: none;">
          <h3 style="margin-top: 2rem;">ğŸ“‹ Ø³Ø¬Ù„ ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
          <div class="content-card">
            <div style="max-height: 300px; overflow-y: auto;" id="loginLogsContainer"></div>
          </div>
        </div>
        
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª -->
        <div class="content-card" style="margin-top: 2rem;">
          <h4>ğŸ“Š Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø±ØªØ¨Ø©</h4>
          
          <div style="margin-top: 1rem;">
            <h5 style="color: #f093fb; margin-bottom: 0.5rem;">ğŸ‘‘ Ø§Ù„Ù…Ø§Ù„Ùƒ (Owner)</h5>
            <div class="permissions-grid">
              <div class="permission-item allowed">âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</div>
              <div class="permission-item allowed">âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†</div>
              <div class="permission-item allowed">âœ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
              <div class="permission-item allowed">âœ… Ø¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†</div>
            </div>
          </div>
          
          <div style="margin-top: 1.5rem;">
            <h5 style="color: #667eea; margin-bottom: 0.5rem;">âš¡ Ø§Ù„Ù…Ø¯ÙŠØ± (Admin)</h5>
            <div class="permissions-grid">
              <div class="permission-item allowed">âœ… Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
              <div class="permission-item allowed">âœ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
              <div class="permission-item allowed">âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
              <div class="permission-item denied">âŒ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
            </div>
          </div>
          
          <div style="margin-top: 1.5rem;">
            <h5 style="color: #48bb78; margin-bottom: 0.5rem;">ğŸ›¡ï¸ Ø§Ù„Ù…Ø´Ø±Ù (Moderator)</h5>
            <div class="permissions-grid">
              <div class="permission-item allowed">âœ… Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
              <div class="permission-item allowed">âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
              <div class="permission-item denied">âŒ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
              <div class="permission-item denied">âŒ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
            </div>
          </div>
          
          <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(237, 137, 54, 0.1); border-radius: 10px; border: 1px solid rgba(237, 137, 54, 0.3);">
            <h5 style="color: #f6ad55; margin-bottom: 0.5rem;">ğŸ”’ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†</h5>
            <ul style="margin: 0; padding-right: 1.5rem; color: #f6ad55;">
              <li>ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø´ÙØ±Ø©</li>
              <li>Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ (5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰)</li>
              <li>ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ 30 Ø¯Ù‚ÙŠÙ‚Ø©</li>
              <li>Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ† Ù„Ù„Ù…Ø§Ù„Ùƒ</li>
              <li>ØªØ³Ø¬ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Ù†Ø§ÙØ°Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
  <div class="auth-modal" id="authModal">
    <div class="auth-content">
      <button class="close-modal" onclick="closeAuthModal()">Ã—</button>
      <div class="auth-header">
        <h3>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
        <p style="color: #a0aec0;">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</p>
      </div>
      
      <div class="error-message alert" id="authError"></div>
      
      <input type="text" id="adminUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" style="text-align: center;" />
      <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="text-align: center;" />
      <button onclick="checkLogin()">Ø¯Ø®ÙˆÙ„</button>
    </div>
  </div>

  <!-- Ù…Ø¤Ø´Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ -->
  <div class="connection-status">
    <span class="status-indicator" id="statusIndicator"></span>
    <span id="statusText">Ù…ØªØµÙ„</span>
  </div>

  <footer>
    &copy; 2025 Ø³ÙŠØ±ÙØ± Ø¥ÙƒØ³Ø§Ø± - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© | ØµÙÙ…Ù… Ø¨Ù€ â¤ï¸
  </footer>

<script>
// ===================================
// Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
const SECURITY_CONFIG = {
  maxLoginAttempts: 5, // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  lockoutDuration: 15 * 60 * 1000, // Ù…Ø¯Ø© Ø§Ù„Ø­Ø¸Ø±: 15 Ø¯Ù‚ÙŠÙ‚Ø©
  sessionTimeout: 30 * 60 * 1000, // Ù…Ù‡Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø©: 30 Ø¯Ù‚ÙŠÙ‚Ø©
  requireTwoFactor: true, // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ† Ù„Ù„Ù…Ø§Ù„Ùƒ
  secretKey: "EXAR2025SECRET" // Ù…ÙØªØ§Ø­ Ø³Ø±ÙŠ Ù„Ù„ØªØ´ÙÙŠØ±
};

// Ø¯Ø§Ù„Ø© ØªØ´ÙÙŠØ± Ø¨Ø³ÙŠØ·Ø© (ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙŠØ¬Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù… bcrypt Ø£Ùˆ Ù…ÙƒØªØ¨Ø© ØªØ´ÙÙŠØ± Ù‚ÙˆÙŠØ©)
function simpleHash(text) {
  let hash = 0;
  for (let i = 0; i < text.length; i++) {
    const char = text.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash = hash & hash;
  }
  return Math.abs(hash).toString(16);
}

// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª (Ù…Ø¹ ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ù…Ø´ÙØ±Ø©)
const ADMIN_USERS = {
  // Ø§Ù„Ù…Ø§Ù„Ùƒ
  "owner": {
    username: "owner",
    passwordHash: simpleHash("anoussa11"),
    role: "owner",
    displayName: "Ù…Ø§Ù„Ùƒ Ø§Ù„Ø³ÙŠØ±ÙØ±",
    permissions: ["all"],
    requireTwoFactor: true,
    twoFactorCode: "852741" // ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
  },
  // Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
  "admin1": {
    username: "admin1",
    passwordHash: simpleHash("admin123"),
    role: "admin",
    displayName: "Ù…Ø¯ÙŠØ± 1",
    permissions: ["view", "edit", "delete", "export"],
    requireTwoFactor: false
  },
  "admin2": {
    username: "admin2",
    passwordHash: simpleHash("admin456"),
    role: "admin",
    displayName: "Ù…Ø¯ÙŠØ± 2",
    permissions: ["view", "edit", "delete", "export"],
    requireTwoFactor: false
  },
  // Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†
  "mod1": {
    username: "mod1",
    passwordHash: simpleHash("mod123"),
    role: "moderator",
    displayName: "Ù…Ø´Ø±Ù 1",
    permissions: ["view", "edit"],
    requireTwoFactor: false
  },
  "mod2": {
    username: "mod2",
    passwordHash: simpleHash("mod456"),
    role: "moderator",
    displayName: "Ù…Ø´Ø±Ù 2",
    permissions: ["view", "edit"],
    requireTwoFactor: false
  }
};

// Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
let loginAttempts = {};
let sessionStartTime = null;
let sessionTimer = null;
// ===================================

// Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Firebase
window.addEventListener('DOMContentLoaded', function() {
  const checkFirebase = setInterval(() => {
    if (window.firebaseDB) {
      clearInterval(checkFirebase);
      initializeApp();
    }
  }, 100);
});

// Ø±Ø§Ø¨Ø· Formspree
const FORMSPREE_ENDPOINT = "https://formspree.io/f/mrbkjnbn";

// Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
let applicationsData = [];
let currentFilter = 'all';
let isOnline = navigator.onLine;
let currentUser = null;
let database, dbRef, dbPush, dbSet, dbGet, dbOnValue, dbRemove, serverTimestamp;

// Ø¯Ø§Ù„Ø© Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†ØµÙˆØµ Ù…Ù† HTML
function escapeHtml(text) {
  const map = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#039;'
  };
  return String(text).replace(/[&<>"']/g, m => map[m]);
}

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
function initializeApp() {
  const fb = window.firebaseDB;
  database = fb.database;
  dbRef = fb.ref;
  dbPush = fb.push;
  dbSet = fb.set;
  dbGet = fb.get;
  dbOnValue = fb.onValue;
  dbRemove = fb.remove;
  serverTimestamp = fb.serverTimestamp;
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø­ÙÙˆØ¸
  const savedUser = sessionStorage.getItem('currentUser');
  const savedSessionTime = sessionStorage.getItem('sessionStartTime');
  
  if (savedUser && savedSessionTime) {
    const user = JSON.parse(savedUser);
    const sessionTime = parseInt(savedSessionTime);
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©
    if (Date.now() - sessionTime < SECURITY_CONFIG.sessionTimeout) {
      currentUser = user;
      sessionStartTime = sessionTime;
      updateUserInterface();
      startSessionTimer();
    } else {
      // Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ù†ØªÙ‡ÙŠØ©
      sessionStorage.removeItem('currentUser');
      sessionStorage.removeItem('sessionStartTime');
    }
  }
  
  // ØªÙ†Ø¸ÙŠÙ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
  cleanupOldLoginAttempts();
  
  listenToFirebaseChanges();
  updateConnectionStatus();
  updateNotificationBadge();
  syncWithFirebase();
}

// ØªÙ†Ø¸ÙŠÙ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
function cleanupOldLoginAttempts() {
  const now = Date.now();
  Object.keys(loginAttempts).forEach(username => {
    const attempt = loginAttempts[username];
    // Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ØªÙŠ Ù…Ø¶Ù‰ Ø¹Ù„ÙŠÙ‡Ø§ Ø£ÙƒØ«Ø± Ù…Ù† Ø³Ø§Ø¹Ø©
    if (now - attempt.lastAttempt > 3600000) {
      delete loginAttempts[username];
    }
  });
}

// ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function updateUserInterface() {
  if (currentUser) {
    document.getElementById('currentUserName').textContent = currentUser.displayName;
    const roleElement = document.getElementById('currentUserRole');
    roleElement.textContent = getRoleText(currentUser.role);
    roleElement.className = `role-badge role-${currentUser.role}`;
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
    updatePermissions();
  }
}

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Øµ Ø§Ù„Ø±ØªØ¨Ø©
function getRoleText(role) {
  const roles = {
    'owner': 'Ø§Ù„Ù…Ø§Ù„Ùƒ',
    'admin': 'Ù…Ø¯ÙŠØ±',
    'moderator': 'Ù…Ø´Ø±Ù'
  };
  return roles[role] || role;
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function updatePermissions() {
  if (!currentUser) return;
  
  const permissions = currentUser.permissions;
  const isOwner = currentUser.role === 'owner';
  const isAdmin = currentUser.role === 'admin';
  const isModerator = currentUser.role === 'moderator';
  
  // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
  document.getElementById('adminsTabBtn').style.display = (isOwner || isAdmin) ? 'block' : 'none';
  
  // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
  if (document.getElementById('clearAllBtn')) {
    document.getElementById('clearAllBtn').style.display = isOwner ? 'flex' : 'none';
  }
  
  // ØªØ­Ø¯ÙŠØ« ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø­Ø°Ù ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
  document.querySelectorAll('.delete-app-btn').forEach(btn => {
    btn.style.display = (isOwner || isAdmin) ? 'block' : 'none';
  });
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
function hasPermission(permission) {
  if (!currentUser) return false;
  if (currentUser.role === 'owner') return true;
  return currentUser.permissions.includes(permission);
}

// Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
window.addEventListener('online', () => {
  isOnline = true;
  updateConnectionStatus();
  syncWithFirebase();
});

window.addEventListener('offline', () => {
  isOnline = false;
  updateConnectionStatus();
});

// ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
function updateConnectionStatus() {
  const indicator = document.getElementById('statusIndicator');
  const text = document.getElementById('statusText');
  
  if (isOnline) {
    indicator.classList.remove('offline');
    text.textContent = 'Ù…ØªØµÙ„';
  } else {
    indicator.classList.add('offline');
    text.textContent = 'ØºÙŠØ± Ù…ØªØµÙ„';
  }
}

// Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Firebase
function listenToFirebaseChanges() {
  const applicationsRef = dbRef(database, 'applications');
  
  dbOnValue(applicationsRef, (snapshot) => {
    const data = snapshot.val();
    if (data) {
      applicationsData = Object.keys(data).map(key => ({
        ...data[key],
        id: key
      }));
      updateNotificationBadge();
      if (currentUser && document.getElementById('admin').classList.contains('active')) {
        loadApplications();
        updateStats();
      }
    }
  });
}

// Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Firebase
async function saveApplicationToFirebase(application) {
  try {
    const applicationsRef = dbRef(database, 'applications');
    const newAppRef = dbPush(applicationsRef);
    await dbSet(newAppRef, {
      ...application,
      timestamp: serverTimestamp()
    });
    return newAppRef.key;
  } catch (error) {
    console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
    throw error;
  }
}

// ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
function updateNotificationBadge() {
  const badge = document.getElementById('notificationBadge');
  const lastVisit = localStorage.getItem('lastAdminVisit');
  let newCount = 0;
  
  if (lastVisit) {
    const lastVisitDate = new Date(lastVisit);
    newCount = applicationsData.filter(app => new Date(app.date) > lastVisitDate).length;
  } else {
    newCount = applicationsData.length;
  }
  
  if (newCount > 0) {
    badge.textContent = newCount;
    badge.style.display = 'block';
  } else {
    badge.style.display = 'none';
  }
}

// Ø¯ÙˆØ§Ù„ Ø¹Ø§Ù…Ø©
window.showSection = function(id) {
  document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

window.showError = function(message, elementId = 'errorMessage') {
  const errorDiv = document.getElementById(elementId);
  if (errorDiv) {
    errorDiv.textContent = message;
    errorDiv.style.display = 'block';
    setTimeout(() => {
      errorDiv.style.display = 'none';
    }, 5000);
  }
}

window.showSuccess = function(message) {
  const successDiv = document.getElementById('successMessage');
  if (successDiv) {
    successDiv.textContent = message;
    successDiv.style.display = 'block';
    setTimeout(() => {
      successDiv.style.display = 'none';
    }, 5000);
  }
}

// Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
window.showPasswordModal = function() {
  if (currentUser) {
    showSection('admin');
    loadApplications();
    updateStats();
    loadAdmins();
    localStorage.setItem('lastAdminVisit', new Date().toISOString());
    document.getElementById('notificationBadge').style.display = 'none';
  } else {
    document.getElementById('authModal').classList.add('active');
    document.getElementById('adminUsername').focus();
  }
}

// Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
window.closeAuthModal = function() {
  document.getElementById('authModal').classList.remove('active');
  document.getElementById('authError').style.display = 'none';
  document.getElementById('adminUsername').value = '';
  document.getElementById('adminPassword').value = '';
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
window.checkLogin = function() {
  const username = document.getElementById('adminUsername').value.trim();
  const password = document.getElementById('adminPassword').value;
  const ip = 'USER_IP'; // ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙŠØ¬Ø¨ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ IP Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¸Ø±
  if (isUserLocked(username)) {
    const remainingTime = getRemainingLockTime(username);
    showError(`ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ ${Math.ceil(remainingTime / 60000)} Ø¯Ù‚ÙŠÙ‚Ø©`, 'authError');
    return;
  }
  
  // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
  const user = Object.values(ADMIN_USERS).find(u => 
    u.username === username && u.passwordHash === simpleHash(password)
  );
  
  if (user) {
    // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØªØ·Ù„Ø¨ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ†
    if (user.requireTwoFactor && SECURITY_CONFIG.requireTwoFactor) {
      showTwoFactorModal(user);
    } else {
      loginSuccess(user);
    }
  } else {
    loginFailed(username, ip);
  }
}

// Ø¯Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function loginSuccess(user) {
  currentUser = user;
  sessionStorage.setItem('currentUser', JSON.stringify(user));
  sessionStartTime = Date.now();
  sessionStorage.setItem('sessionStartTime', sessionStartTime);
  
  // Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„Ø¬Ù„Ø³Ø©
  startSessionTimer();
  
  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø§Ø¬Ø­
  logLoginAttempt(user.username, true, 'USER_IP');
  
  // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ÙØ´Ù„
  delete loginAttempts[user.username];
  
  updateUserInterface();
  closeAuthModal();
  closeTwoFactorModal();
  showSection('admin');
  loadApplications();
  updateStats();
  loadAdmins();
  localStorage.setItem('lastAdminVisit', new Date().toISOString());
  document.getElementById('notificationBadge').style.display = 'none';
  showSuccess(`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${user.displayName}!`);
}

// Ø¯Ø§Ù„Ø© ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function loginFailed(username, ip) {
  // Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ÙØ§Ø´Ù„Ø©
  if (!loginAttempts[username]) {
    loginAttempts[username] = {
      count: 0,
      firstAttempt: Date.now(),
      lastAttempt: Date.now()
    };
  }
  
  loginAttempts[username].count++;
  loginAttempts[username].lastAttempt = Date.now();
  
  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙØ§Ø´Ù„Ø©
  logLoginAttempt(username, false, ip);
  
  const remainingAttempts = SECURITY_CONFIG.maxLoginAttempts - loginAttempts[username].count;
  
  if (remainingAttempts <= 0) {
    // Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    loginAttempts[username].lockedUntil = Date.now() + SECURITY_CONFIG.lockoutDuration;
    showError('ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø³Ø¨Ø¨ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¯Ø®ÙˆÙ„ ÙØ§Ø´Ù„Ø© Ù…ØªØ¹Ø¯Ø¯Ø©!', 'authError');
  } else {
    showError(`Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©! (${remainingAttempts} Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©)`, 'authError');
  }
  
  document.getElementById('adminPassword').value = '';
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function isUserLocked(username) {
  const attempt = loginAttempts[username];
  if (!attempt || !attempt.lockedUntil) return false;
  return Date.now() < attempt.lockedUntil;
}

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø­Ø¸Ø±
function getRemainingLockTime(username) {
  const attempt = loginAttempts[username];
  if (!attempt || !attempt.lockedUntil) return 0;
  return Math.max(0, attempt.lockedUntil - Date.now());
}

// Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„Ø¬Ù„Ø³Ø©
function startSessionTimer() {
  // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¥Ù† ÙˆØ¬Ø¯
  if (sessionTimer) clearInterval(sessionTimer);
  
  sessionTimer = setInterval(() => {
    checkSessionTimeout();
  }, 60000); // Ø§Ù„ØªØ­Ù‚Ù‚ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©
function checkSessionTimeout() {
  if (!sessionStartTime) return;
  
  const elapsed = Date.now() - sessionStartTime;
  if (elapsed > SECURITY_CONFIG.sessionTimeout) {
    showError('Ø§Ù†ØªÙ‡Øª Ø¬Ù„Ø³ØªÙƒ. ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    logoutAdmin(true);
  }
}

// ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
function logLoginAttempt(username, success, ip) {
  const logs = JSON.parse(localStorage.getItem('loginLogs') || '[]');
  logs.push({
    username,
    success,
    ip,
    timestamp: new Date().toISOString(),
    userAgent: navigator.userAgent
  });
  
  // Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø¢Ø®Ø± 100 Ø³Ø¬Ù„ ÙÙ‚Ø·
  if (logs.length > 100) {
    logs.splice(0, logs.length - 100);
  }
  
  localStorage.setItem('loginLogs', JSON.stringify(logs));
}

// Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ†
function showTwoFactorModal(user) {
  const modalHtml = `
    <div class="auth-modal active" id="twoFactorModal">
      <div class="auth-content">
        <button class="close-modal" onclick="closeTwoFactorModal()">Ã—</button>
        <div class="auth-header">
          <h3>ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ†</h3>
          <p style="color: #a0aec0;">Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø±Ø³Ù„ Ø¥Ù„ÙŠÙƒ</p>
        </div>
        
        <div class="error-message alert" id="twoFactorError"></div>
        
        <input type="text" id="twoFactorCode" placeholder="Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ (6 Ø£Ø±Ù‚Ø§Ù…)" maxlength="6" style="text-align: center;" />
        <button onclick="verifyTwoFactor('${user.username}')">ØªØ­Ù‚Ù‚</button>
        
        <p style="margin-top: 1rem; color: #a0aec0; font-size: 0.9rem;">
          Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${user.twoFactorCode}
        </p>
      </div>
    </div>
  `;
  
  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ØµÙØ­Ø©
  const tempDiv = document.createElement('div');
  tempDiv.innerHTML = modalHtml;
  document.body.appendChild(tempDiv.firstElementChild);
  
  document.getElementById('twoFactorCode').focus();
}

// Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ†
window.closeTwoFactorModal = function() {
  const modal = document.getElementById('twoFactorModal');
  if (modal) modal.remove();
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ†
window.verifyTwoFactor = function(username) {
  const code = document.getElementById('twoFactorCode').value;
  const user = Object.values(ADMIN_USERS).find(u => u.username === username);
  
  if (user && code === user.twoFactorCode) {
    loginSuccess(user);
  } else {
    showError('Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­!', 'twoFactorError');
    document.getElementById('twoFactorCode').value = '';
  }
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
window.logoutAdmin = function(isTimeout = false) {
  if (!isTimeout && !confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) return;
  
  currentUser = null;
  sessionStorage.removeItem('currentUser');
  sessionStorage.removeItem('sessionStartTime');
  
  // Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Ø§Ù„Ø¬Ù„Ø³Ø©
  if (sessionTimer) {
    clearInterval(sessionTimer);
    sessionTimer = null;
  }
  
  showSection('home');
  if (!isTimeout) {
    showSuccess('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
  }
}

// Ø¹Ø±Ø¶ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
window.showAdminTab = function(tab) {
  // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
  document.querySelectorAll('.admin-tab-content').forEach(content => {
    content.style.display = 'none';
  });
  
  // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
  document.querySelectorAll('.admin-tab').forEach(btn => {
    btn.classList.remove('active');
  });
  
  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø­Ø¯Ø¯
  document.getElementById(tab + 'Tab').style.display = 'block';
  event.target.classList.add('active');
  
  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
  if (tab === 'admins') {
    loadAdmins();
  }
}

// ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†
window.loadAdmins = function() {
  const container = document.getElementById('adminsList');
  container.innerHTML = '';
  
  Object.values(ADMIN_USERS).forEach(admin => {
    const card = document.createElement('div');
    card.className = 'admin-card';
    
    const roleClass = `role-${admin.role}`;
    const roleText = getRoleText(admin.role);
    const initial = admin.displayName.charAt(0);
    
    card.innerHTML = `
      <div class="admin-details">
        <div class="admin-avatar">${initial}</div>
        <div>
          <div style="font-weight: 600; font-size: 1.1rem;">${escapeHtml(admin.displayName)}</div>
          <div class="admin-meta">@${escapeHtml(admin.username)}</div>
        </div>
      </div>
      <span class="role-badge ${roleClass}">${roleText}</span>
    `;
    
    container.appendChild(card);
  });
}

// Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¯Ø®ÙˆÙ„
document.addEventListener('DOMContentLoaded', function() {
  const usernameInput = document.getElementById('adminUsername');
  const passwordInput = document.getElementById('adminPassword');
  
  [usernameInput, passwordInput].forEach(input => {
    if (input) {
      input.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          checkLogin();
        }
      });
    }
  });
});

// Ù…Ø¹Ø§Ù„Ø¬ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
document.getElementById('applyForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  if (!database) {
    showError('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„');
    return;
  }
  
  const formData = {
    ign: document.getElementById('ign').value.trim(),
    discord: document.getElementById('discord').value.trim(),
    email: document.getElementById('email').value.trim() || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
    age: parseInt(document.getElementById('age').value.trim()),
    reason: document.getElementById('reason').value.trim(),
    date: new Date().toLocaleString('ar-SA'),
    status: 'Ø¬Ø¯ÙŠØ¯',
    notes: ''
  };
  
  document.getElementById('loader').style.display = 'block';
  document.getElementById('submitBtn').disabled = true;
  
  try {
    if (isOnline) {
      await saveApplicationToFirebase(formData);
      showSuccess('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.');
    } else {
      const localApps = JSON.parse(localStorage.getItem('pendingApplications') || '[]');
      localApps.push({...formData, id: Date.now()});
      localStorage.setItem('pendingApplications', JSON.stringify(localApps));
      showSuccess('âœ… ØªÙ… Ø­ÙØ¸ Ø·Ù„Ø¨Ùƒ Ù…Ø­Ù„ÙŠØ§Ù‹ ÙˆØ³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡ Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.');
    }
    
    if (isOnline) {
      fetch(FORMSPREE_ENDPOINT, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        },
        body: JSON.stringify({
          ...formData,
          _subject: `Ø·Ù„Ø¨ Ø§Ù†Ø¶Ù…Ø§Ù… Ø¬Ø¯ÙŠØ¯ Ù…Ù† ${formData.ign}`
        })
      }).catch(error => console.error('Ø®Ø·Ø£ ÙÙŠ Formspree:', error));
    }
    
    document.getElementById('applyForm').reset();
  } catch (error) {
    console.error('Ø®Ø·Ø£:', error);
    showError('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
  } finally {
    document.getElementById('loader').style.display = 'none';
    document.getElementById('submitBtn').disabled = false;
  }
});

// Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
function updateStats() {
  if (!currentUser) return;
  
  const container = document.getElementById('statsContainer');
  const today = new Date().toDateString();
  const todayApps = applicationsData.filter(app => new Date(app.date).toDateString() === today).length;
  const avgAge = applicationsData.length > 0 
    ? Math.round(applicationsData.reduce((sum, app) => sum + parseInt(app.age), 0) / applicationsData.length)
    : 0;
  
  container.innerHTML = `
    <div class="stat-card">
      <div class="stat-number">${applicationsData.length}</div>
      <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">${todayApps}</div>
      <div class="stat-label">Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">${avgAge}</div>
      <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¹Ù…Ø±</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">${applicationsData.filter(app => app.notes).length}</div>
      <div class="stat-label">Ø·Ù„Ø¨Ø§Øª Ø¨Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
    </div>
  `;
}

// Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
window.searchApplications = function() {
  if (!currentUser) return;
  
  const searchTerm = document.getElementById('searchInput').value.toLowerCase();
  const filteredApps = applicationsData.filter(app => {
    return app.ign.toLowerCase().includes(searchTerm) ||
           app.discord.toLowerCase().includes(searchTerm) ||
           app.email.toLowerCase().includes(searchTerm) ||
           app.reason.toLowerCase().includes(searchTerm) ||
           app.age.toString().includes(searchTerm);
  });
  
  displayApplications(filteredApps);
}

// Ø§Ù„ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ø±
window.filterByAge = function(filter) {
  currentFilter = filter;
  
  document.querySelectorAll('.filter-badge').forEach(badge => {
    badge.classList.remove('active');
  });
  event.target.classList.add('active');
  
  let filteredApps = applicationsData;
  
  if (filter === '10-15') {
    filteredApps = applicationsData.filter(app => app.age >= 10 && app.age <= 15);
  } else if (filter === '16-20') {
    filteredApps = applicationsData.filter(app => app.age >= 16 && app.age <= 20);
  } else if (filter === '21+') {
    filteredApps = applicationsData.filter(app => app.age >= 21);
  }
  
  displayApplications(filteredApps);
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
function displayApplications(apps) {
  const container = document.getElementById("applications");
  container.innerHTML = "";

  if (apps.length === 0) {
    container.innerHTML = "<p style='text-align: center; color: #a0aec0;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬.</p>";
    return;
  }

  apps.forEach((app, displayIndex) => {
    const actualIndex = applicationsData.findIndex(a => a.id === app.id);
    const card = document.createElement("div");
    card.className = "application-card";
    
    // Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø­Ø³Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
    let actionButtons = '';
    if (hasPermission('edit')) {
      actionButtons += `<button onclick="addNote('${app.id}')" style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);">ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø©</button>`;
      actionButtons += `<button onclick="markAsRead('${app.id}')" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">âœ“ ØªÙ… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</button>`;
    }
    if (hasPermission('delete')) {
      actionButtons += `<button onclick="removeApplication('${app.id}')" style="background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);" class="delete-app-btn">Ø­Ø°Ù</button>`;
    }
    
    card.innerHTML = `
      <div class="card-header">
        Ø·Ù„Ø¨ #${actualIndex + 1} - ${escapeHtml(app.date)}
        ${app.status === 'Ø¬Ø¯ÙŠØ¯' ? '<span style="color: #68d391; float: left;">â— Ø¬Ø¯ÙŠØ¯</span>' : ''}
      </div>
      <strong>Ø§Ù„Ø§Ø³Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©:</strong> ${escapeHtml(app.ign)}<br>
      <strong>Ø§Ù„Ø¹Ù…Ø±:</strong> ${escapeHtml(app.age)}<br>
      <strong>Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯:</strong> ${escapeHtml(app.discord)}<br>
      <strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> ${escapeHtml(app.email)}<br>
      <strong>Ø§Ù„Ø³Ø¨Ø¨:</strong> ${escapeHtml(app.reason)}<br>
      ${app.notes ? `<div class="admin-note"><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:</strong> ${escapeHtml(app.notes)}</div>` : ''}
      <div class="action-buttons">
        ${actionButtons}
      </div>
    `;
    container.appendChild(card);
  });
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
window.loadApplications = function() {
  if (currentUser && hasPermission('view')) {
    displayApplications(applicationsData);
  }
}

// Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø©
window.addNote = async function(id) {
  if (!currentUser || !hasPermission('edit')) return;
  
  const app = applicationsData.find(a => a.id === id);
  const note = prompt("Ø£Ø¶Ù Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨:", app.notes || "");
  if (note !== null) {
    try {
      const noteRef = dbRef(database, `applications/${id}/notes`);
      await dbSet(noteRef, note.trim());
      showSuccess("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø¨Ù†Ø¬Ø§Ø­!");
    } catch (error) {
      showError("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©");
    }
  }
}

// ØªØ­Ø¯ÙŠØ¯ ÙƒÙ…Ù‚Ø±ÙˆØ¡
window.markAsRead = async function(id) {
  if (!currentUser || !hasPermission('edit')) return;
  
  try {
    const statusRef = dbRef(database, `applications/${id}/status`);
    await dbSet(statusRef, 'Ù…Ù‚Ø±ÙˆØ¡');
  } catch (error) {
    showError("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©");
  }
}

// Ø­Ø°Ù Ø·Ù„Ø¨
window.removeApplication = async function(id) {
  if (!currentUser || !hasPermission('delete')) return;
  
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ")) {
    try {
      const appRef = dbRef(database, `applications/${id}`);
      await dbRemove(appRef);
      showSuccess("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
    } catch (error) {
      showError("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨");
    }
  }
}

// Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
window.clearAllApplications = async function() {
  if (!currentUser || !hasPermission('all')) {
    showError("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!");
    return;
  }
  
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!")) {
    if (confirm("ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù " + applicationsData.length + " Ø·Ù„Ø¨ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!")) {
      try {
        const appsRef = dbRef(database, 'applications');
        await dbRemove(appsRef);
        showSuccess("ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª!");
      } catch (error) {
        showError("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª");
      }
    }
  }
}

// Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Firebase
window.syncWithFirebase = async function() {
  const pendingApps = JSON.parse(localStorage.getItem('pendingApplications') || '[]');
  if (pendingApps.length > 0 && isOnline) {
    showSuccess(`Ø¬Ø§Ø±ÙŠ Ù…Ø²Ø§Ù…Ù†Ø© ${pendingApps.length} Ø·Ù„Ø¨...`);
    
    for (const app of pendingApps) {
      try {
        await saveApplicationToFirebase(app);
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø·Ù„Ø¨:', error);
      }
    }
    
    localStorage.removeItem('pendingApplications');
    showSuccess("ØªÙ…Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¨Ù†Ø¬Ø§Ø­!");
  } else if (!isOnline) {
    showError("Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© - ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");
  } else {
    showSuccess("Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø¯Ø«Ø© Ø¨Ø§Ù„ÙØ¹Ù„!");
  }
}

// ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
window.exportApplications = function() {
  if (!currentUser || !hasPermission('export')) {
    showError("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
    return;
  }
  
  const dataStr = JSON.stringify(applicationsData, null, 2);
  const dataBlob = new Blob([dataStr], {type: 'application/json'});
  const link = document.createElement('a');
  link.href = URL.createObjectURL(dataBlob);
  link.download = `exar_applications_${new Date().toISOString().split('T')[0]}.json`;
  link.click();
  showSuccess("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
}

// ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ CSV/Excel
window.exportToCSV = function() {
  if (!currentUser || !hasPermission('export')) {
    showError("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
    return;
  }
  
  let csv = '\ufeff';
  csv += 'Ø§Ù„Ø§Ø³Ù…,Ø§Ù„Ø¹Ù…Ø±,Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯,Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ,Ø§Ù„Ø³Ø¨Ø¨,Ø§Ù„ØªØ§Ø±ÙŠØ®,Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª\n';
  
  applicationsData.forEach(app => {
    csv += `"${app.ign}","${app.age}","${app.discord}","${app.email}","${app.reason}","${app.date}","${app.notes || ''}"\n`;
  });
  
  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `exar_applications_${new Date().toISOString().split('T')[0]}.csv`;
  link.click();
  showSuccess("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Excel Ø¨Ù†Ø¬Ø§Ø­!");
}
</script>

</body>
</html>
